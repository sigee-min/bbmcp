.shell {
  min-height: 100vh;
}

.layout {
  --sidebar-left-width: 252px;
  --sidebar-left-collapsed-width: 84px;
  --sidebar-right-width: 304px;
  height: 100vh;
  width: 100%;
  display: grid;
  grid-template-columns: var(--sidebar-left-width) minmax(0, 1fr) var(--sidebar-right-width);
  grid-template-areas: "sidebar center inspector";
  gap: 0;
  padding: 0;
}

.layoutCollapsed {
  grid-template-columns: var(--sidebar-left-collapsed-width) minmax(0, 1fr) var(--sidebar-right-width);
}

.sidebarArea {
  grid-area: sidebar;
  min-width: 0;
  min-height: 0;
}

.centerArea {
  grid-area: center;
  min-width: 0;
  min-height: 0;
  overflow-y: auto;
  scrollbar-gutter: stable both-edges;
  padding: 0.85rem 1rem;
}

.inspectorArea {
  grid-area: inspector;
  min-width: 0;
  min-height: 0;
}

.sidebarCard {
  display: flex;
  min-height: 0;
  flex-direction: column;
  border-radius: 0;
  background: hsl(var(--card));
}

.leftSidebarCard {
  border-top: 0;
  border-bottom: 0;
  border-left: 0;
}

.rightSidebarCard {
  border-top: 0;
  border-bottom: 0;
  border-right: 0;
}

.sidebarHeader {
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.2);
  padding: 0.62rem;
}

.sidebarHeaderCollapsed {
  padding: 0.48rem;
}

.sidebarTopRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.4rem;
}

.sidebarBrand {
  display: flex;
  min-width: 0;
  align-items: center;
  gap: 0.48rem;
}

.logoFrame {
  height: 1.62rem;
  width: 1.62rem;
  border-radius: 0.32rem;
  box-shadow: inset 0 0 0 1px hsl(var(--border));
}

.sidebarTitle {
  font-size: 0.84rem;
  line-height: 1.1;
}

.sidebarTopActions {
  display: flex;
  align-items: center;
  gap: 0.35rem;
}

.themeDropdown {
  position: relative;
}

.themeTrigger {
  display: inline-flex;
  align-items: center;
  gap: 0.18rem;
  height: 1.5rem;
  min-width: 2.05rem;
  border-radius: 0.32rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  padding: 0 0.3rem;
  font-size: 0.64rem;
  font-weight: 600;
  color: hsl(var(--foreground));
  transition: background-color 140ms ease, border-color 140ms ease;
}

.themeTrigger:hover {
  border-color: hsl(var(--primary) / 0.42);
  background: hsl(var(--muted) / 0.55);
}

.themeTriggerCollapsed {
  min-width: 1.62rem;
  justify-content: center;
  padding: 0;
}

.themeTriggerFooter {
  width: auto;
}

.themeChevron {
  margin-left: 0.02rem;
  color: hsl(var(--muted-foreground));
  transition: transform 140ms ease;
}

.themeChevronOpen {
  transform: rotate(180deg);
}

.themeMenu {
  position: absolute;
  top: calc(100% + 0.32rem);
  right: 0;
  z-index: 45;
  width: 8.5rem;
  overflow: hidden;
  border-radius: 0.42rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  box-shadow: 0 10px 24px rgb(15 23 42 / 18%);
  padding: 0.22rem;
}

.themeMenuItem {
  display: flex;
  width: 100%;
  align-items: center;
  gap: 0.44rem;
  border-radius: 0.32rem;
  padding: 0.32rem 0.4rem;
  font-size: 0.72rem;
  transition: background-color 120ms ease;
}

.themeMenuItem:hover {
  background: hsl(var(--muted));
}

.themeMenuItemActive {
  background: hsl(var(--primary) / 0.14);
  color: hsl(var(--primary));
}

.sidebarContent {
  gap: 0.48rem;
  padding: 0.62rem;
}

.sidebarContentCollapsed {
  padding: 0.42rem 0.34rem;
}

.projectPanel {
  flex: 1 1 auto;
  min-height: clamp(20rem, 56vh, 35rem);
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.22);
  border-radius: 0.38rem;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.projectPanelHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--background) / 0.72);
  padding: 0.4rem 0.5rem;
  font-size: 0.64rem;
  font-weight: 700;
  color: hsl(var(--muted-foreground));
  letter-spacing: 0.01em;
}

.projectPanelHeadLeft {
  display: inline-flex;
  min-width: 0;
  align-items: center;
  gap: 0.28rem;
}

.queueRefreshButton {
  height: 1.26rem;
  width: 1.26rem;
  border-radius: 0.3rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  color: hsl(var(--muted-foreground));
}

.queueRefreshButton:hover {
  border-color: hsl(var(--primary) / 0.42);
  background: hsl(var(--muted) / 0.62);
  color: hsl(var(--foreground));
}

.queueRefreshButton:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.16);
}

.projectList {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 0.32rem;
  padding: 0.36rem 0.36rem 0.46rem;
}

.projectListCollapsed {
  flex: 1 1 auto;
  padding-top: 0.2rem;
}

.projectPanelCollapsed {
  flex: 1 1 auto;
  min-height: clamp(16.5rem, 48vh, 31rem);
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.22);
  border-radius: 0.38rem;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding: 0.28rem;
}

.sidebarFooter {
  margin-top: auto;
  border-top: 1px solid hsl(var(--border));
  padding-top: 0.46rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.28rem;
}

.sidebarFooter .themeDropdown {
  width: auto;
  margin-left: auto;
}

.sidebarFooter .themeMenu {
  top: auto;
  bottom: calc(100% + 0.32rem);
}

.sidebarFooterCollapsed {
  display: flex;
  justify-content: center;
}

.sidebarFooterCollapsed .themeDropdown {
  width: auto;
  margin-left: 0;
}

.sidebarCompactMeta {
  display: flex;
  align-items: center;
  gap: 0.22rem;
}

.sidebarMetaItem {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 0.22rem;
  height: 1.5rem;
  border-radius: 999px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  padding: 0 0.42rem;
  outline: none;
}

.sidebarMetaItem:hover {
  border-color: hsl(var(--primary) / 0.42);
  background: hsl(var(--muted) / 0.46);
}

.sidebarMetaItem:focus-visible {
  border-color: hsl(var(--primary) / 0.62);
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.16);
}

.sidebarMetaIcon {
  height: 0.72rem;
  width: 0.72rem;
  color: hsl(var(--muted-foreground));
}

.sidebarMetaCount {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.66rem;
  font-weight: 700;
  color: hsl(var(--foreground));
}

.sidebarMetaHint {
  pointer-events: none;
  position: absolute;
  left: 0;
  bottom: calc(100% + 0.34rem);
  z-index: 55;
  width: 10.4rem;
  border-radius: 0.36rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  box-shadow: 0 10px 22px rgb(15 23 42 / 20%);
  padding: 0.34rem 0.4rem;
  opacity: 0;
  transform: translateY(2px);
  transition: opacity 120ms ease, transform 120ms ease;
}

.sidebarMetaItem:hover .sidebarMetaHint,
.sidebarMetaItem:focus-visible .sidebarMetaHint {
  opacity: 1;
  transform: translateY(0);
}

.sidebarMetaHintTitle {
  margin: 0;
  font-size: 0.63rem;
  font-weight: 700;
  color: hsl(var(--foreground));
}

.sidebarMetaHintDesc {
  margin: 0.14rem 0 0;
  font-size: 0.6rem;
  line-height: 1.3;
  color: hsl(var(--muted-foreground));
}

.projectItem {
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: space-between;
  gap: 0.46rem;
  border-radius: 0.36rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  padding: 0.44rem 0.48rem;
  text-align: left;
  transition: border-color 120ms ease, background-color 120ms ease;
}

.projectItem:hover {
  border-color: hsl(var(--primary) / 0.45);
}

.projectItemActive {
  border-color: hsl(var(--primary) / 0.58);
  background: hsl(var(--primary) / 0.1);
}

.projectName {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 0.74rem;
  font-weight: 600;
}

.projectStatus {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  border: 1px solid transparent;
  padding: 0.14rem 0.36rem;
  font-size: 0.6rem;
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.01em;
  white-space: nowrap;
}

.projectStatusIdle {
  border-color: hsl(var(--border));
  background: hsl(var(--muted) / 0.6);
  color: hsl(var(--muted-foreground));
}

.projectStatusSync {
  border-color: rgb(245 158 11 / 40%);
  background: rgb(245 158 11 / 14%);
  color: rgb(180 83 9);
}

.projectStatusBusy {
  border-color: rgb(16 185 129 / 40%);
  background: rgb(16 185 129 / 14%);
  color: rgb(4 120 87);
}

html[data-theme='dark'] .projectStatusSync {
  color: rgb(251 191 36);
}

html[data-theme='dark'] .projectStatusBusy {
  color: rgb(52 211 153);
}

.projectChip {
  display: flex;
  height: 2.02rem;
  width: 100%;
  align-items: center;
  justify-content: center;
  border-radius: 0.34rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  font-size: 0.64rem;
  font-weight: 700;
  transition: border-color 120ms ease, background-color 120ms ease;
}

.projectChip:hover {
  border-color: hsl(var(--primary) / 0.45);
}

.projectChipActive {
  border-color: hsl(var(--primary) / 0.58);
  background: hsl(var(--primary) / 0.13);
}

.heroCard {
  background: hsl(var(--card));
}

.viewerHeader {
  padding: 0.92rem 1rem 0.52rem;
}

.viewerHeaderRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.45rem;
}

.viewerTitle {
  font-size: 0.98rem;
}

.viewerHelpBox {
  position: relative;
}

.viewerHelpButton {
  position: relative;
  display: inline-flex;
  height: 1.44rem;
  width: 1.44rem;
  align-items: center;
  justify-content: center;
  border-radius: 0.28rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  color: hsl(var(--muted-foreground));
  transition: background-color 120ms ease, color 120ms ease, border-color 120ms ease;
}

.viewerHelpButton:hover {
  border-color: hsl(var(--primary) / 0.4);
  background: hsl(var(--muted) / 0.5);
  color: hsl(var(--foreground));
}

.viewerHelpButton:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px hsl(var(--primary) / 0.16);
}

.viewerHelpDialog {
  position: absolute;
  top: calc(100% + 0.32rem);
  right: 0;
  z-index: 62;
  width: min(16.4rem, calc(100vw - 1.5rem));
  border-radius: 0.36rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  box-shadow: 0 10px 24px rgb(15 23 42 / 20%);
  padding: 0.4rem 0.48rem;
}

.viewerHelpTitle {
  margin: 0;
  font-size: 0.68rem;
  font-weight: 700;
}

.viewerHelpList {
  margin: 0.32rem 0 0;
  padding-left: 0.95rem;
  display: grid;
  gap: 0.2rem;
  font-size: 0.62rem;
  line-height: 1.35;
  color: hsl(var(--muted-foreground));
}

.viewportShell {
  background:
    radial-gradient(460px 220px at 50% -10%, hsl(var(--accent) / 0.14), transparent 68%),
    hsl(var(--muted) / 0.42);
}

.viewportFrame {
  background: hsl(var(--background));
  box-shadow:
    inset 0 0 0 1px hsl(var(--border)),
    0 10px 24px rgb(15 23 42 / 11%);
}

.inspectorHeader {
  border-bottom: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.2);
  padding: 0.68rem 0.78rem;
}

.inspectorHeaderRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.44rem;
}

.inspectorToolBox {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 0.2rem;
  border: 1px solid hsl(var(--border));
  border-radius: 0.34rem;
  background: hsl(var(--background));
  padding: 0.16rem;
}

.inspectorToolButton {
  position: relative;
  display: inline-flex;
  height: 1.5rem;
  width: 1.5rem;
  align-items: center;
  justify-content: center;
  border-radius: 0.24rem;
  color: hsl(var(--muted-foreground));
  transition: background-color 120ms ease, color 120ms ease;
}

.inspectorToolButton:hover {
  background: hsl(var(--muted) / 0.56);
  color: hsl(var(--foreground));
}

.inspectorToolButton:focus-visible {
  outline: none;
  box-shadow: inset 0 0 0 1px hsl(var(--primary) / 0.7);
  color: hsl(var(--foreground));
}

.inspectorHelpDialog {
  position: absolute;
  top: calc(100% + 0.34rem);
  right: 0;
  z-index: 62;
  width: min(15.8rem, calc(100vw - 1.5rem));
  border-radius: 0.38rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  box-shadow: 0 12px 26px rgb(15 23 42 / 22%);
  padding: 0.44rem 0.52rem 0.5rem;
}

.inspectorHelpTitle {
  margin: 0;
  font-size: 0.7rem;
  font-weight: 700;
}

.inspectorHelpList {
  margin: 0.34rem 0 0;
  padding-left: 0.95rem;
  display: grid;
  gap: 0.22rem;
  font-size: 0.62rem;
  line-height: 1.35;
  color: hsl(var(--muted-foreground));
}

.inspectorContent {
  gap: 0.5rem;
  padding: 0.62rem;
}

.inspectorContextBar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.4rem;
  border: 1px solid hsl(var(--border));
  border-radius: 0.36rem;
  background: hsl(var(--muted) / 0.2);
  padding: 0.3rem 0.4rem;
}

.inspectorContextRevision {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.65rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
  letter-spacing: 0.01em;
}

.inspectorContextStats {
  display: inline-flex;
  align-items: center;
  gap: 0.24rem;
}

.inspectorContextStat {
  display: inline-flex;
  align-items: center;
  gap: 0.18rem;
  border: 1px solid hsl(var(--border));
  border-radius: 999px;
  background: hsl(var(--background));
  padding: 0.12rem 0.34rem;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.64rem;
  font-weight: 600;
}

.tabRail {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.24rem;
  border-radius: 0.4rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.35);
  padding: 0.22rem;
}

.inspectorTab {
  border-radius: 0.3rem;
  padding: 0.34rem 0.34rem;
  font-size: 0.7rem;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
  transition: background-color 120ms ease, color 120ms ease;
}

.inspectorTab:hover {
  background: hsl(var(--muted));
  color: hsl(var(--foreground));
}

.inspectorTabActive {
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

.inspectorMain {
  min-height: 0;
  flex: 1;
  overflow-y: auto;
}

.hierarchyTree {
  display: flex;
  min-height: 0;
  flex-direction: column;
  gap: 0.18rem;
  border: 1px solid hsl(var(--border));
  border-radius: 0.38rem;
  background: hsl(var(--background));
  padding: 0.28rem;
}

.hierarchyTreeRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.45rem;
  height: 1.74rem;
  border-radius: 0.32rem;
  border: 1px solid transparent;
  padding-right: 0.36rem;
  transition: border-color 120ms ease, background-color 120ms ease;
}

.hierarchyTreeRow:hover {
  border-color: hsl(var(--primary) / 0.35);
  background: hsl(var(--muted) / 0.45);
}

.hierarchyTreeMain {
  display: flex;
  min-width: 0;
  align-items: center;
  gap: 0.34rem;
}

.hierarchyBoneIcon {
  color: hsl(var(--foreground));
}

.hierarchyCubeIcon {
  color: hsl(var(--accent));
}

.hierarchyTreeName {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 0.72rem;
  font-weight: 600;
}

.hierarchyTreeKind {
  border-radius: 999px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted) / 0.42);
  padding: 0.09rem 0.3rem;
  font-size: 0.58rem;
  font-weight: 700;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: hsl(var(--muted-foreground));
}

.animationList {
  display: grid;
  gap: 0.24rem;
}

.animationItem {
  border: 1px solid hsl(var(--border));
  border-radius: 0.34rem;
  background: hsl(var(--background));
  padding: 0.42rem 0.46rem;
}

.animationName {
  font-size: 0.72rem;
  font-weight: 600;
}

.animationMeta {
  margin-top: 0.2rem;
  font-size: 0.64rem;
  color: hsl(var(--muted-foreground));
}

.inspectorFooterMeta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.46rem;
}

.inspectorFooterItem {
  display: inline-flex;
  align-items: baseline;
  gap: 0.24rem;
  line-height: 1;
}

.inspectorFooterItem + .inspectorFooterItem {
  border-left: 1px solid hsl(var(--border));
  padding-left: 0.46rem;
}

.inspectorFooterKey {
  font-size: 0.58rem;
  font-weight: 700;
  color: hsl(var(--muted-foreground));
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

.inspectorFooterValue {
  font-size: 0.67rem;
  font-weight: 600;
  color: hsl(var(--foreground));
}

.inspectorFooterValueMono {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 0.66rem;
  font-weight: 700;
  color: hsl(var(--foreground));
}

@media (min-width: 921px) {
  .sidebarArea,
  .centerArea,
  .inspectorArea {
    height: 100%;
  }
}

@media (max-width: 1240px) {
  .layout {
    --sidebar-left-width: 230px;
    --sidebar-right-width: 278px;
  }
}

@media (max-width: 1080px) {
  .layout {
    --sidebar-left-width: 208px;
    --sidebar-right-width: 244px;
  }
}

@media (max-width: 920px) {
  .layout {
    height: auto;
    grid-template-columns: minmax(0, 1fr);
    grid-template-areas:
      "sidebar"
      "center"
      "inspector";
    gap: 0.75rem;
    padding: 0.75rem;
  }

  .layoutCollapsed {
    grid-template-columns: minmax(0, 1fr);
  }

  .centerArea {
    padding: 0;
  }

  .leftSidebarCard,
  .rightSidebarCard {
    border: 1px solid hsl(var(--border));
    border-radius: 0;
  }

  .projectPanel,
  .projectPanelCollapsed {
    min-height: clamp(14rem, 40vh, 24rem);
  }
}

@media (max-width: 640px) {
  .themeTrigger {
    min-width: auto;
    padding: 0 0.45rem;
  }

  .themeTrigger span {
    display: none;
  }

  .themeChevron {
    display: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  .themeTrigger,
  .themeChevron,
  .themeMenuItem,
  .viewerHelpButton,
  .inspectorToolButton,
  .projectItem,
  .projectChip,
  .inspectorTab {
    transition: none;
  }
}
