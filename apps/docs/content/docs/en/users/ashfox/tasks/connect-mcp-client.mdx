---
title: Connect External MCP Client
description: Configure and validate a remote MCP client against Ashfox service endpoints.
summary: "Configure and validate a remote MCP client against Ashfox service endpoints."
---

# Connect External MCP Client

## Purpose
Establish stable MCP connectivity from non-Blockbench clients.

## Prerequisites
- Repository dependencies are installed (`npm install`).
- Required services (gateway/worker or target environment) are running.
- MCP endpoint is reachable from your client/network environment.

## Quick Start
1. Issue the key that matches your scope.
   - Workspace modeling calls: workspace API key
   - Service operations automation: service API key
2. Connect your MCP client with `/mcp` plus `Authorization: Bearer <API_KEY>`.
3. Execute handshake and capability discovery (`system.list_capabilities`).
4. Run one read-only call to verify automatic scope binding.

## Detailed Steps
1. Issue a workspace API key and store the raw secret safely.
2. Configure only these two client values:
   - Endpoint: `https://<gateway-host>/mcp`
   - Header: `Authorization: Bearer <API_KEY>`
3. Validate the session flow with `initialize`, `tools/list`, and `system.list_capabilities`.
4. Run a read-only tool call and confirm workspace scope is resolved automatically.
5. Validate error mapping and retry behavior in client logs.

## Keyspace Isolation Model
- Workspace API keys can only see workspace tools in `tools/list`.
- Service API keys can only see service-management tools in `tools/list`.
- Guessing a tool from the other keyspace always returns `unknown_tool` and does not reveal tool existence.
- Reusing an existing MCP session with a different API key is blocked with `401`.

## Failure and Recovery
- Connection failure: verify endpoint path, service status, and firewall/permission settings.
- Authentication failure (401): verify key revocation/expiry and issue a new API key.
- Schema error: retry with the minimal request and refresh client schema cache.
- Validation failure: resolve reported findings, then re-run from Quick Start.

## Related Docs
- [Ashfox Installation](/en/docs/users/ashfox/installation)
- [Schema and Client Cache](/en/docs/users/troubleshooting/schema-and-client-cache)
- [Revision and Concurrency](/en/docs/users/troubleshooting/revision-and-concurrency)
